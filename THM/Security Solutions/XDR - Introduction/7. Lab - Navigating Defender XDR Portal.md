## Lab Scenario

In this Lab task, we will navigate the Microsoft Defender portal.

**Note:** To follow through, you can use the labe credentials and URL below:

![THM Key Credentials](https://tryhackme-images.s3.amazonaws.com/user-uploads/63588b5ef586912c7d03c4f0/room-content/be629720b11a294819516c1d4e738c92.png)

|   |   |
|---|---|
|**URL**|[MS Defender Portal](https://security.microsoft.com/)|
|**User**|mde@thmxdr.onmicrosoft.com|
|**Password**|WhereIsMyMind$#@!|

## Context

New to Microsoft Defender XDR, you have been assigned to explore and understand the Defender portal.

**Step 1:** **Navigating the Microsoft Defender Portal**

- Sign in to the [Microsoft Defender portal](https://security.microsoft.com/) using your lab credentials
- Microsoft Defender XDR is mainly the first few tabs on the navigation pane.
- Then, navigating down to the bottom, you will find additional settings for reports and product-specific settings.

![](https://tryhackme-images.s3.amazonaws.com/user-uploads/6601e243753b8d484668851e/room-content/6601e243753b8d484668851e-1744205909989.png)![](https://tryhackme-images.s3.amazonaws.com/user-uploads/6601e243753b8d484668851e/room-content/6601e243753b8d484668851e-1744205910226.png)

It's worth noting that the Defender portal consists of other specific Defender products, such as Exposure management, Endpoints, Identities, Email, and Collaboration, which are placed in separate sections.

**Step 2: Incident and Alert Investigations**

Incidents are a collection of alerts related to a single threat or attack. They are confirmed security breaches or threats that have compromised an organization's assets, data, or systems.

- On the Microsoft Defender portal, select **Incidents** to see a list of all incidents across all domains.
- Click on the **Multi-stage incident involving Privilege escalation on one endpoint** (Incident ID 48) to investigate an incident.

![](https://tryhackme-images.s3.amazonaws.com/user-uploads/6601e243753b8d484668851e/room-content/6601e243753b8d484668851e-1744207510762.png)

- Select each tab to view incident details and related entities.
    - Select Unassigned **(1)** to assign an incident to a member of your team
    - Select each tab on **(2)** to see related entities and alerts
    - Click **Play attack story (3)** to see how each event happened
    - Select **Manage incident (4)** to edit or modify the incident details
    - Select **Export incident as PDF (5)** to download a shareable PDF document.
    - The **(6)** shows the relationship between the different entities
    - Scroll down on the **Incident details (7)** for more information on the incident

![](https://tryhackme-images.s3.amazonaws.com/user-uploads/6601e243753b8d484668851e/room-content/6601e243753b8d484668851e-1744208907192.png)

- Click on the other tabs under **Incidents & alerts** to review them.

![](https://tryhackme-images.s3.amazonaws.com/user-uploads/6601e243753b8d484668851e/room-content/6601e243753b8d484668851e-1744214390143.png)

Take the time to review the incidents, drill down into the incident details, and practice to understand how to access the information and determine the next steps in your analysis.

**Step 3: Hunting**

Hunting is a feature in Microsoft Defender XDR that uses a query-based threat-hunting interface (KQL) to allow security teams to proactively hunt for and detect advanced threats within their organization's environment. 

- Click on **Advance hunting** on the navigation pane
- Select **Queries** in the middle pane to see all templates (the **Queries** option may be hidden; drag the bar to the right to reveal it)
- Select **Shared queries** to see and run all shared queries
- Select **Community queries** to see all queries from the Microsoft Defender community

![](https://tryhackme-images.s3.amazonaws.com/user-uploads/6601e243753b8d484668851e/room-content/6601e243753b8d484668851e-1744215260650.gif)

**Step 4: Run an Advance Hunting Query**

Here, we will look at how to run an advanced hunting query

- Select **+** and **Query in editor** to open a new query tab.

![](https://tryhackme-images.s3.amazonaws.com/user-uploads/6601e243753b8d484668851e/room-content/6601e243753b8d484668851e-1744215577388.png)

- Copy and paste the following query. This query will pull security alert data from the AlertInfo table and sort it in ascending order based on the AlertId column.

```session-shell
AlertInfo
| sort by AlertId
```

- Extend the time range to 30 days
- Click Run query to run the query pasted
- The query result is then shown below

![](https://tryhackme-images.s3.amazonaws.com/user-uploads/6601e243753b8d484668851e/room-content/6601e243753b8d484668851e-1744215577806.png)

