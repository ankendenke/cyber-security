Before we can dive into DOM-based attacks, we need to explain what the DOM is first. DOM refers to the Document Object Model, which is the programming interface that displays the web document. When you make a request to a web application, the HTML in the response is loaded as the DOM in the browser. In essence, the DOM is the programmatic view of the web application that the user sees in their browser. Once loaded, JavaScript can interface with the DOM and make updates to change what the user sees. The DOM has a tree-like structure, allowing developers to use JavaScript code to search it or modify specific elements. Let's take a look at a practical example:

```html
<html>
    <head>
        <title>Hello World!</title>
    </head>
    <body>
        <h1> Hello Moon! </h1>
        <p> The earth says hello! </p>
    </body>
</html>
```

If you want to play with the DOM, you can copy the code above to a file called `index.html` and open it using your browser. The `document` element is always the head of the tree. The subtree `html` is where all the HTML code of the loaded webpage would live, which is divided into `head` and `body`. You can view the DOM using your web browser's built-in Developer's Tools by right-clicking the page and selecting the Inspect option.

![DOM shown from the browser view](https://tryhackme-images.s3.amazonaws.com/user-uploads/6093e17fa004d20049b6933e/room-content/8015a8c076c525e3a23d7e1b4224b41b.png)  

Using the developer tools, we can also interface with the JavaScript console and use this to modify the DOM. For example, we could create a new element in the DOM using the following instructions:

1. Click the Console button
2. Create a new paragraph: `const paragraph = document.createElement("p");`  
    
3. Create a new text node: `const data = document.createTextNode("Our new text");`
4. Add the text to our new paragraph: `paragraph.appendChild(data);`  
    
5. Find the existing paragraph and append the new paragraph: `document.getElementsByTagName("p")[0].appendChild(paragraph);`
6. Your new text should be loaded, as shown below.  
    

![DOM shown from the browser view](https://tryhackme-images.s3.amazonaws.com/user-uploads/6093e17fa004d20049b6933e/room-content/71e76d68460b0b8f7a1dcced921db74a.png)

This is also where the true power of DOM-based attacks lies. If we can inject into the DOM, we can alter what the user sees or even potentially take actions as the user, effectively impersonating them! This became a significantly larger problem with modern web application frameworks or so-called single-page web applications where control over the DOM does not just mean control over a single webpage but persistence across the entire web application.